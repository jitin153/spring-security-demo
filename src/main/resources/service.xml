<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- <mapper namespace="com.demospringsecurity.dao.ServiceDao">
	
	<resultMap id="userInfoResultMap" type="com.demospringsecurity.model.UserBO">
		<result property="userId" column="USER_ID" />
		<result property="fullName" column="FULL_NAME" />
		<result property="email" column="EMAIL" />
		<result property="mobile" column="MOBILE" />
		<result property="dateOfBirth" column="DATE_OF_BIRTH" />
		<result property="dateOfJoining" column="DATE_OF_JOINING" />
		<result property="status" column="STATUS" />
		<collection property="roles" ofType="String" select="getUserRoles" column="USER_ID" />
	</resultMap>
	
	<select id="getUserDetails" resultMap="userInfoResultMap">
		SELECT * FROM USER_INFO WHERE EMAIL = #{email}
	</select>
	
	<select id="getUserRoles" resultType="String">
		SELECT R.ROLE FROM ROLES R JOIN USER_ROLE UR ON R.ROLE_ID = UR.ROLE_ID WHERE UR.USER_ID = #{USER_ID}
	</select>

</mapper> -->